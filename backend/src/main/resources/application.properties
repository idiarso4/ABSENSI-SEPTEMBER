# PostgreSQL Configuration (Production)
# spring.datasource.url=jdbc:postgresql://localhost:5432/simsekolahdb
# spring.datasource.driverClassName=org.postgresql.Driver
# spring.datasource.username=postgres
# spring.datasource.password=postgres

# MySQL Configuration (Production)
# spring.datasource.url=jdbc:mysql://localhost:3306/simsekolahdb?useSSL=false&serverTimezone=UTC
# spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver
# spring.datasource.username=root
# spring.datasource.password=password

# H2 Database Configuration (Development)
# Keep the DB alive during app runtime and enable MySQL compatibility for broader SQL support
spring.datasource.url=jdbc:h2:mem:simsekolahdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=MySQL
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# Redis Configuration (disabled for development)
spring.redis.enabled=false

# JPA / Hibernate Configuration
# Use Hibernate to manage schema in dev; Flyway disabled below
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# PostgreSQL Hibernate Dialect (Production)
# spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# MySQL Hibernate Dialect (Production)
# spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# Profile-specific configurations
spring.profiles.active=dev

# Flyway Configuration (disabled for dev with H2 due to MySQL-specific migrations)
spring.flyway.enabled=false
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration

# JWT Configuration
app.jwt.secret=SimSekolahSecretKeyMustBeLongEnoughForHS512Algorithm2024
app.jwt.expiration=86400000

# Email Configuration
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=noreply@simsekolah.com
spring.mail.password=your-app-password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# School Information (for reports)
app.school.name=SMK Negeri 1 Jakarta - SIJA
app.school.address=Jl. Teknologi No. 123, Jakarta 12345
app.school.phone=+62 21 1234 5678
app.school.email=info@smkn1jakarta.sch.id

# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=50MB

# Excel Import Configuration
app.import.excel.allowed-content-types=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
app.import.max-rows=5000
app.import.teacher.default-password=Password123!

# Logging Configuration
logging.level.com.simsekolah=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.flywaydb=WARN
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Log directory
logging.file.name=logs/simsekolah.log
logging.logback.rollingpolicy.max-file-size=50MB
logging.logback.rollingpolicy.max-history=30

# Structured logging
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# Temporary increased logging for Spring Security to diagnose 403 on /api/auth/login
logging.level.org.springframework.security.web=DEBUG
logging.level.com.simsekolah.security=DEBUG

# H2 Console (optional for local debugging)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# Write application logs to a file for easier debugging during dev
logging.file.name=logs/dev-app.log

# Expose actuator mappings so we can inspect request mappings during debugging
management.endpoints.web.exposure.include=health,info,mappings
management.endpoint.mappings.enabled=true

# Internationalization
spring.messages.basename=messages
spring.messages.encoding=UTF-8

# CORS Configuration (dev)
app.cors.allowed-origins=http://localhost:3000,http://localhost:5173,http://localhost:4200
app.cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true

# Application Info
spring.application.name=SIM Sekolah Management System
app.name=SIM Sekolah Management System
app.description=Sistem Informasi Manajemen Sekolah Modern dengan Teknologi Spring Boot
app.version=1.0.0
app.build.date=2024-09-07
app.dev.enableAdminReset=true

# Reduce Tomcat native compatibility warnings (dev)
logging.level.org.apache.catalina.core.AprLifecycleListener=WARN
logging.level.org.apache.tomcat.util.compat=WARN
